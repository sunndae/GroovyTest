# Utilizar una imagen base oficial de Java.
FROM openjdk:17

# Establecer el directorio de trabajo en el contenedor
WORKDIR /app

# Copiar el script de Gradle y la configuración para usar el wrapper
COPY gradlew /app/
COPY gradle /app/gradle

# Copiar los archivos de configuración de Gradle
COPY build.gradle /app/
COPY settings.gradle /app/
COPY gradle.properties /app/


COPY src /app/src

# Dar permisos de ejecución al script gradlew
RUN chmod +x ./gradlew

# Ejecutar el ensamblaje de la aplicación utilizando Gradle
RUN ./gradlew assemble --no-daemon

# Exponer el puerto en el que se ejecutará la aplicación
EXPOSE 8080

# Comando para ejecutar la aplicación
CMD ["./gradlew", "bootRun", "--no-daemon"]
